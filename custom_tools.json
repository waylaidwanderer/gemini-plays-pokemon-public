{
  "scan_reachable_unseen": {
    "description": "Identifies unseen tiles that are reachable from the player's current position using a flood fill algorithm on traversable tiles. Returns a list of coordinates.",
    "input_schema": {},
    "python_script": "import xml.etree.ElementTree as ET\nfrom collections import deque\n\ndef is_traversable(tile_type):\n    traversable_types = [\n        \"FLOOR\", \"TALL_GRASS\", \"LONG_GRASS\", \"STAIRS\", \n        \"WARP_CARPET_DOWN\", \"WARP_CARPET_UP\", \"WARP_CARPET_LEFT\", \"WARP_CARPET_RIGHT\",\n        \"DOOR\", \"OPEN_DOOR\"\n    ]\n    return tile_type in traversable_types\n\nmap_data = ET.fromstring(map_xml_string)\nwidth = int(map_data.get(\"width\"))\nheight = int(map_data.get(\"height\"))\n\ngrid = [[None for _ in range(width)] for _ in range(height)]\nplayer_pos = None\n\nfor row in map_data.findall(\"Row\"):\n    y = int(row.get(\"id\"))\n    for tile in row.findall(\"Tile\"):\n        x = int(tile.get(\"id\"))\n        grid[y][x] = tile\n        if tile.find(\"Player\") is not None:\n            player_pos = (x, y)\n\nif not player_pos:\n    print(\"Player not found\")\n    exit()\n\nvisited = set()\nqueue = deque([player_pos])\nvisited.add(player_pos)\nreachable_unseen = []\n\ndirections = [(0, 1), (0, -1), (1, 0), (-1, 0)]\n\nwhile queue:\n    cx, cy = queue.popleft()\n    \n    for dx, dy in directions:\n        nx, ny = cx + dx, cy + dy\n        \n        if 0 <= nx < width and 0 <= ny < height:\n            if (nx, ny) in visited:\n                continue\n                \n            tile = grid[ny][nx]\n            tile_type = tile.get(\"type\")\n            is_seen = tile.get(\"seen\") == \"true\"\n            has_object = tile.get(\"has-object\") == \"true\"\n            \n            if not is_seen:\n                reachable_unseen.append((nx, ny))\n                visited.add((nx, ny))\n                continue\n            \n            if is_traversable(tile_type) and not has_object:\n                visited.add((nx, ny))\n                queue.append((nx, ny))\n\nprint(f\"Reachable unseen tiles: {reachable_unseen}\")",
    "history": [
      {
        "commit_message": "feat: Add scan_reachable_unseen tool to identify reachable unseen tiles for exploration.",
        "timestamp": "2025-11-19T22:54:46.456Z",
        "action_counter": 59
      },
      {
        "commit_message": "feat: Add scan_reachable_unseen tool to identify reachable unseen tiles for exploration.",
        "timestamp": "2025-11-19T23:51:32.034Z",
        "action_counter": 153
      }
    ]
  },
  "face_and_interact": {
    "description": "Turns the player to face a specified direction and immediately interacts (presses A). If the player is already facing that direction, it simply presses A to avoid unnecessary movement/collisions.",
    "input_schema": {
      "type": "object",
      "properties": {
        "direction": {
          "type": "string",
          "enum": [
            "Up",
            "Down",
            "Left",
            "Right"
          ]
        },
        "current_facing": {
          "type": "string",
          "enum": [
            "up",
            "down",
            "left",
            "right"
          ]
        }
      },
      "required": [
        "direction",
        "current_facing"
      ]
    },
    "python_script": "import json\n\ndirection = input_data['direction'].lower()\ncurrent = input_data.get('current_facing', '').lower()\n\nif direction == current:\n    print(json.dumps([\"A\"]))\nelse:\n    # Capitalize first letter for button press\n    btn = direction.capitalize()\n    print(json.dumps([btn, \"sleep 500\", \"A\"]))",
    "history": [
      {
        "commit_message": "feat: Add face_and_interact tool to combine turning and interacting into a single action, improving efficiency for NPC and object interactions.",
        "timestamp": "2025-11-20T00:01:17.923Z",
        "action_counter": 167
      },
      {
        "commit_message": "fix: prevent unnecessary movement when already facing target. Requires `current_facing` argument.",
        "timestamp": "2025-11-20T00:11:34.994Z",
        "action_counter": 181
      }
    ]
  }
}