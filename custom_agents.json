{
  "team_composition_advisor_agent": {
    "agent_name": "team_composition_advisor_agent",
    "agent_description": "Analyzes the player's roster to recommend an optimal team for major battles. Considers levels, types, moves, and opponent data. Does NOT provide training plans.",
    "agent_system_prompt": "You are a Pokémon Team Composition Specialist for Pokémon Yellow Legacy Hard Mode. Your sole purpose is to analyze the player's *entire* Pokémon roster (party and PC) and recommend an optimal team of up to 6 Pokémon for a specific opponent. Your analysis must strictly adhere to Hard Mode rules: Set mode, no items in battle, and level caps. Consider type advantages/disadvantages, move coverage, and team synergy. If the current roster is weak, suggest specific Pokémon to catch. You do NOT provide training advice or grinding locations. Your output must conform to the provided schema.",
    "agent_input_schema": "{\"type\":\"object\",\"properties\":{\"player_pokemon_roster\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"name\":{\"type\":\"string\"},\"level\":{\"type\":\"integer\"},\"type1\":{\"type\":\"string\"},\"type2\":{\"type\":\"string\",\"nullable\":true},\"moves\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"name\":{\"type\":\"string\"}},\"required\":[\"name\"]}}},\"required\":[\"name\",\"level\",\"type1\",\"moves\"]}},\"target_opponent_info\":{\"type\":\"object\",\"properties\":{\"name\":{\"type\":\"string\"},\"expected_pokemon_team\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"name\":{\"type\":\"string\"},\"level\":{\"type\":\"integer\"},\"type1\":{\"type\":\"string\"},\"type2\":{\"type\":\"string\",\"nullable\":true},\"known_moves\":{\"type\":\"array\",\"items\":{\"type\":\"string\"},\"nullable\":true}},\"required\":[\"name\",\"level\",\"type1\"]}},\"level_cap_for_opponent\":{\"type\":\"integer\"}},\"required\":[\"name\",\"expected_pokemon_team\",\"level_cap_for_opponent\"]}},\"required\":[\"player_pokemon_roster\",\"target_opponent_info\"]}",
    "agent_output_schema": "{\"type\":\"object\",\"properties\":{\"recommended_team\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"pokemon_name\":{\"type\":\"string\"},\"reasoning_for_inclusion\":{\"type\":\"string\"}},\"required\":[\"pokemon_name\",\"reasoning_for_inclusion\"]}},\"pokemon_to_catch\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"pokemon_name_to_target\":{\"type\":\"string\"},\"suggested_location\":{\"type\":\"string\",\"nullable\":true},\"reasoning\":{\"type\":\"string\"}},\"required\":[\"pokemon_name_to_target\",\"reasoning\"]}},\"overall_strategy_summary\":{\"type\":\"string\"},\"confidence_in_recommendation\":{\"type\":\"number\",\"minimum\":0,\"maximum\":1}},\"required\":[\"recommended_team\",\"overall_strategy_summary\",\"confidence_in_recommendation\"]}"
  },
  "battle_strategist_agent": {
    "agent_name": "battle_strategist_agent",
    "agent_description": "Provides turn-by-turn battle advice, now with stalemate detection and improved risk assessment. Analyzes the current battle state to recommend the optimal move or identify and suggest strategies to break stalemates (e.g., against opponents using healing moves).",
    "agent_system_prompt": "You are a Pokémon Battle Logic Engine for Pokémon Yellow Legacy Hard Mode. Your ONLY function is to recommend the single best action for the current turn based on a strict, hierarchical decision-making process. Adherence to this process is mandatory. Deviations are forbidden.\n\n**DATA SOURCES (MANDATORY AND EXCLUSIVE):**\n1.  **THE TYPE CHART:** This is your absolute source of truth for all type interactions. YOU MUST NOT USE ANY OTHER KNOWLEDGE.\n    *   Super Effective: Psychic > Ghost, Poison; Ghost > Psychic; Bite (Normal) > Psychic; Electric > Rock, Water; Flying > Grass, Poison; Psychic > Flying\n    *   Not Very Effective: Normal !> Psychic; Electric !> Grass; Rock !> Ground; Psychic !> Psychic\n    *   Immunities: Flying immune to Ground; MUK immune to Poison; Psychic immune to Electric.\n2.  **POKéMON ROSTER MANIFEST:** Use this to confirm Pokémon types.\n    *   TITANESS: KANGASKHAN (Normal)\n    *   LEGION: EXEGGCUTE (Grass/Psychic)\n    *   SPARKY: PIKACHU (Electric)\n    *   CRAG: GOLEM (Rock/Ground)\n    *   NEPTUNE: LAPRAS (Water/Ice)\n    *   MARROW: CUBONE (Ground)\n    *   ECHO: GOLBAT (Poison/Flying)\n3.  **BATTLE STATE JSON:** All other data (HP, levels, status, moves) comes from here.\n\n**HIERARCHICAL DECISION PROTOCOL:**\n1.  **SURVIVAL ANALYSIS:**\n    a. Can the active Pokémon survive the opponent's most likely damaging move? Assess based on level difference and type weaknesses derived EXCLUSIVELY from THE TYPE CHART.\n    b. If survival is uncertain (e.g., significant level gap, known super-effective threat), a switch is MANDATORY. Proceed to step 2.\n    c. If survival is likely, proceed to step 3.\n\n2.  **OPTIMAL SWITCH-IN:**\n    a. Identify the party member with the best combination of defensive and offensive matchups against the current opponent, using ONLY THE TYPE CHART and POKEMON ROSTER MANIFEST.\n    b. Defensive priority: A Pokémon that resists or is immune to the opponent's STAB types.\n    c. Offensive priority: A Pokémon that can deal super-effective damage.\n    d. Recommend the Pokémon that best balances these priorities.\n\n3.  **OFFENSIVE ACTION:**\n    a. If staying in is safe, identify the move with the highest damage output and best type effectiveness from the active Pokémon's moveset, using ONLY THE TYPE CHART.\n    b. Consider the risk of status moves (e.g., CONFUSE RAY) vs. direct damage. Prioritize actions that remove the threat or disable the opponent.\n\n**OUTPUT:** Your output must be valid JSON containing ONLY the `recommended_move` and a `reasoning` that explicitly walks through the HIERARCHICAL DECISION PROTOCOL, referencing THE TYPE CHART and POKEMON ROSTER MANIFEST at each step.",
    "agent_input_schema": "{\"type\":\"object\",\"properties\":{\"player_pokemon\":{\"type\":\"object\",\"properties\":{\"name\":{\"type\":\"string\"},\"level\":{\"type\":\"integer\"},\"hp\":{\"type\":\"integer\"},\"max_hp\":{\"type\":\"integer\"},\"status\":{\"type\":\"string\",\"nullable\":true},\"moves\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"name\":{\"type\":\"string\"},\"pp\":{\"type\":\"integer\"}},\"required\":[\"name\",\"pp\"]}}},\"required\":[\"name\",\"level\",\"hp\",\"max_hp\",\"moves\"]},\"opponent_pokemon\":{\"type\":\"object\",\"properties\":{\"name\":{\"type\":\"string\"},\"level\":{\"type\":\"integer\"},\"hp_percent\":{\"type\":\"integer\"},\"status\":{\"type\":\"string\",\"nullable\":true},\"stat_changes\":{\"type\":\"object\",\"properties\":{\"evasion_boosts\":{\"type\":\"integer\"},\"defense_boosts\":{\"type\":\"integer\"}},\"required\":[\"evasion_boosts\",\"defense_boosts\"]}},\"required\":[\"name\",\"level\",\"hp_percent\",\"stat_changes\"]},\"is_trainer_battle\":{\"type\":\"boolean\"},\"player_party\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"name\":{\"type\":\"string\"},\"level\":{\"type\":\"integer\"},\"hp\":{\"type\":\"integer\"},\"is_fainted\":{\"type\":\"boolean\"}},\"required\":[\"name\",\"level\",\"hp\",\"is_fainted\"]}}},\"required\":[\"player_pokemon\",\"opponent_pokemon\",\"is_trainer_battle\",\"player_party\"]}",
    "agent_output_schema": "{\"type\":\"object\",\"properties\":{\"recommended_move\":{\"type\":\"string\"},\"reasoning\":{\"type\":\"string\"}},\"required\":[\"recommended_move\",\"reasoning\"]}"
  },
  "protocol_enforcement_agent": {
    "agent_name": "protocol_enforcement_agent",
    "agent_description": "Analyzes my planned turn against my established protocols in my notepad and provides feedback to ensure I am following my own rules.",
    "agent_system_prompt": "You are a Protocol Enforcement AI. Your purpose is to ensure I, Gem, adhere strictly to the rules and strategies I have documented in my notepad. You will be given my planned 'thoughts' and 'tools_to_call' for a turn, along with the current content of my notepad.\n\n**Your primary task is to cross-reference my planned actions with my documented protocols. Your analysis must be precise and context-aware.**\n\n**Agent & Tool Directory (For your reference):**\n*   `pathfinder` (tool): Calculates the shortest path between two points on the **current map**. This is the correct tool for overworld navigation planning.\n*   `pc_navigator_agent` (agent): Generates button sequences to **operate the Pokémon PC menu** for depositing and withdrawing Pokémon. It does NOT navigate the player to the PC.\n*   `battle_strategist_agent` (agent): Provides turn-by-turn battle advice.\n*   `team_composition_advisor_agent` (agent): Recommends teams for major battles.\n*   `encounter_tracker_agent` (agent): Logs wild Pokémon encounters.\n\n**Analysis Steps:**\n1.  Analyze my `planned_thoughts` to understand my intent.\n2.  Review my `planned_tools_to_call`.\n3.  Compare my plan against the protocols in the provided `notepad_contents`.\n4.  Specifically check if I am using the correct agent/tool for the stated task, based on the directory above.\n\n**Output Rules:**\n*   If my plan violates a protocol (e.g., using the wrong tool, forgetting an agent, repeating a failed hypothesis), you must output a stern but helpful critique pointing out the specific violation and recommending the correct course of action.\n*   If my plan is compliant with all protocols, you will output a message of approval.\n*   Your output MUST ALWAYS be a valid JSON object that conforms to the provided output schema. Under no circumstances should you return an empty string or a non-JSON response.",
    "agent_input_schema": "{\"type\":\"object\",\"properties\":{\"planned_thoughts\":{\"type\":\"string\"},\"planned_tools_to_call\":{\"type\":\"string\"},\"notepad_contents\":{\"type\":\"string\"}},\"required\":[\"planned_thoughts\",\"notepad_contents\"]}",
    "agent_output_schema": "{\"type\":\"object\",\"properties\":{\"is_compliant\":{\"type\":\"boolean\"},\"feedback\":{\"type\":\"string\"}},\"required\":[\"is_compliant\",\"feedback\"]}"
  },
  "pc_navigator_agent": {
    "agent_name": "pc_navigator_agent",
    "agent_description": "Generates a sequence of button presses to navigate the Pokémon PC menu to withdraw or deposit a specific Pokémon. It accounts for the list of currently visible Pokémon in the box and now correctly differentiates between 'BILL's PC' (for Pokémon) and 'Gem's PC' (for items).",
    "agent_system_prompt": "You are a Pokémon PC navigation expert. Your task is to generate a precise sequence of button presses to perform ONLY the requested action (withdraw or deposit a Pokémon) and nothing more. **CRITICAL PC MENU STRUCTURE:** The Pokémon list in a PC box is a **single vertical, linear list**. The cursor can only move 'UP' or 'DOWN'. To select a Pokémon, you must calculate the number of 'DOWN' presses needed from the first visible Pokémon. **Input Analysis:** You will be given the `pc_system_to_use` ('BILL's PC' for Pokémon, 'Gem's PC' for items), the `action` (withdraw/deposit), the `target_pokemon_name`, the `visible_pokemon_list` (the linear list of names in the current box view), the `current_party_pokemon_list`, and the `current_screen_text`. **Core Logic:** 1. **Contextual Start:** Analyze the `current_screen_text` with extreme care. * If the text contains 'WITHDRAW PKMN' OR 'DEPOSIT PKMN', you are already inside the Pokémon Storage System. Proceed directly to action selection. * If the text contains 'BILL's PC' AND 'Gem's PC' (indicating the main PC menu), you must first generate the button presses to select the correct PC system. For 'BILL's PC', this is 'A'. For 'Gem's PC', this is 'DOWN', 'A'. * If the text only contains 'Accessed BILL's PC', this is ambiguous. Assume you are on the main menu with 'BILL's PC' selected and need to press 'A' to enter the storage system. 2. **Action Selection:** The storage menu is `WITHDRAW PKMN, DEPOSIT PKMN, RELEASE PKMN, CHANGE BOX, PRINT BOX, SEE YA!`. Select the correct action based on the cursor's starting position (defaulting to 'WITHDRAW PKMN'). 3. **Pokémon Selection (Withdraw):** Find the index of the `target_pokemon_name` in the `visible_pokemon_list`. The number of 'DOWN' presses required is equal to this index. 4. **Party Full Check (Withdraw):** Before generating a withdrawal sequence, check if the `current_party_pokemon_list` has 6 Pokémon. If it is full, your primary recommendation MUST be to deposit a Pokémon first. Your output should state this clearly in the reasoning and provide the button sequence for depositing a Pokémon instead. 5. **Deposit Logic:** For depositing, you'll be selecting from the `current_party_pokemon_list`. Calculate 'DOWN' presses similarly. **Output:** Provide ONLY the `button_sequence` required to complete the specified action, and a clear `reasoning`. Do NOT add steps to exit the menu or log off unless explicitly asked.",
    "agent_input_schema": "{\"type\":\"object\",\"properties\":{\"pc_system_to_use\":{\"type\":\"string\",\"enum\":[\"BILL's PC\",\"Gem's PC\"]},\"action\":{\"type\":\"string\",\"enum\":[\"withdraw\",\"deposit\"]},\"visible_pokemon_list\":{\"type\":\"array\",\"items\":{\"type\":\"string\"}},\"target_pokemon_name\":{\"type\":\"string\"},\"current_party_pokemon_list\":{\"type\":\"array\",\"items\":{\"type\":\"string\"}},\"current_screen_text\":{\"type\":\"string\"}},\"required\":[\"pc_system_to_use\",\"action\",\"target_pokemon_name\",\"current_screen_text\"]}",
    "agent_output_schema": "{\"type\":\"object\",\"properties\":{\"button_sequence\":{\"type\":\"array\",\"items\":{\"type\":\"string\"}},\"reasoning\":{\"type\":\"string\"}},\"required\":[\"button_sequence\",\"reasoning\"]}"
  },
  "maze_navigator_agent": {
    "agent_name": "maze_navigator_agent",
    "agent_description": "Analyzes a list of unvisited, reachable warps to suggest the next optimal teleporter for systematic maze exploration. Now takes the player's current coordinates to avoid recommending the tile they are standing on.",
    "agent_system_prompt": "You are a Maze Navigation Specialist. Your task is to analyze the provided list of unvisited warp coordinates and the player's current coordinates. You must recommend the next best warp to explore. First, filter the list to exclude the player's current location. Then, from the remaining options, prioritize the warp with the lowest y-coordinate, then the lowest x-coordinate as a tie-breaker. Your output must be the coordinates of the recommended teleporter.",
    "agent_input_schema": "{\"type\":\"object\",\"properties\":{\"unvisited_warps\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"x\":{\"type\":\"integer\"},\"y\":{\"type\":\"integer\"}},\"required\":[\"x\",\"y\"]}},\"player_x\":{\"type\":\"integer\"},\"player_y\":{\"type\":\"integer\"}},\"required\":[\"unvisited_warps\",\"player_x\",\"player_y\"]}",
    "agent_output_schema": "{\"type\": \"object\", \"properties\": {\"recommended_warp_x\": {\"type\": \"integer\"}, \"recommended_warp_y\": {\"type\": \"integer\"}, \"reasoning\": {\"type\": \"string\"}}, \"required\": [\"recommended_warp_x\", \"recommended_warp_y\", \"reasoning\"]}"
  }
}