# I. Quest Log

- **Current Quest: The Mt. Moon Fossil**
    - **Objective:** Find a way past the Rocket Grunt at Mt. Moon B2F (30,12) or the Hiker at 1F (6,7).
    - **Status:** Active. Testing new hypotheses generated by the puzzle_solver_agent.
- **Stalled Quest: The Copycat's Gift**
    - **Objective:** Obtain a POKé DOLL and give it to COPYCAT.
    - **Status:** Stalled. All leads in Cerulean City exhausted. Suspect COPYCAT is not in a currently accessible area.

# II. Fossil Quest - Hypotheses Log

- **Active Hypotheses (Ranked by Agent):**
    1.  **Hiker Disguise:** The Hiker on 1F will move if a 'Hiker' Pokémon (like Geodude) is in the party lead.
    2.  **Poké Doll for Hiker:** The Hiker on 1F will accept the POKé DOLL.

- **Failed Hypotheses:**
    - The Silph Scope will reveal a ghost in Mt. Moon. (Result: Failed. Prof. Oak prevents item use.)
    - The Rocket Grunt on B2F will accept the POKé DOLL. (Result: Failed. Prof. Oak prevents item use.)
    - Giving the POKé DOLL to the Grunt will make the Hiker on 1F move. (Result: Invalidated.)
    - The Hiker will only move for an 'adult'. (Result: Failed. Dialogue unchanged.)
    - The fossil is in an interactable rock.
    - The Hiker on 1F at (6,7) will move if shown the revived HELIX fossil Pokémon.
    - The scientist in the Cinnabar Lab Fossil Room can 'un-revive' a fossil Pokémon.
    - Presenting the revived HELIX fossil Pokémon to the Rocket Grunt on B2F will trigger a new event.
    - The 'fossil' the Rocket Grunt wants is the MOON STONE.
    - A specific, non-fossil Pokémon from Mt. Moon (e.g., Geodude) will satisfy the Grunt.
    - The Hiker on Mt. Moon 1F at (6,7) is part of a chained quest.
    - The 'fossil' the Grunt wants must be stolen from the Pewter City Museum of Science.
    - The move 'Dig' must be used on a specific, unmarked tile within Mt. Moon.
    - The Rocket Grunt will accept a Pokémon nicknamed 'fossil'.
    - The Hiker on Mt. Moon 1F at (6,7) will trade you for your revived fossil Pokémon.
    - A ladder's destination can be changed by entering and exiting it multiple times.
    - There is a hidden, one-way passage concealed in the western wall on 1F.
    - The Escape Rope item functions differently within Mt. Moon.
    - A rock is a disguised ladder that requires a Clefairy in the party.
    - The Hiker is thirsty and needs a drink item.
    - An un-revived fossil can be acquired by fishing inside Mt. Moon.
    - The Rocket Grunt will accept a thematically 'fossil' Pokémon like Marowak.
    - The Pokémon Tower is a red herring for the fossil quest.
    - Interacting with the second Rocket Grunt on B2F at (30, 18) will open a new path or provide a clue. (Result: Failed.)
    - Evolving a Clefairy with a Moon Stone in front of the Grunt will trigger an event. (Result: Failed. Prof. Oak prevents item use.)
    - Speaking to the Old Man in Viridian City will influence an NPC in Mt. Moon. (Result: Failed.)

# III. Battle Intelligence

- **Type Effectiveness Chart (Verified):**
    - Water > Rock/Ground
    - Water is not very effective against Bug/Grass, Ghost/Poison
    - Poison is not very effective against Poison/Flying, Rock/Ground
    - Flying is not very effective against Rock/Ground
- **Notable Trainer Rosters:**
    - **Sabrina (Saffron Gym):** MR. MIME (Lv 65), HYPNO (Lv 64), SLOWBRO (Lv 64), JYNX (Lv 64), GENGAR (Lv 64), ALAKAZAM (Lv 65).
    - **SMITH (Cerulean Cave):** AERODACTYL (Lv 65).
    - **Brock (Pewter Gym):** OMASTAR (Lv 64), ONIX (Lv 65), KABUTOPS (Lv 64), GOLEM (Lv 64), NINETALES (Lv 64), AERODACTYL (Lv 65).

# IV. Game Mechanics & Rules

- **Anomalous Mechanics:**
    - **POKé DOLL Escape:** A POKé DOLL can be used to guarantee an escape from a wild Pokémon battle.
    - **Battle Menu Anomaly:** The game appears to intentionally restrict move selection in certain wild battles to the first move slot.
    - **Party Menu 'SWITCH' Lock:** The game can prevent using the 'SWITCH' command in the party menu, observed after multiple failed escape attempts.
    - **Shop Menu Navigation Anomaly:** The Cerulean Mart shop menu does not follow a standard grid layout and requires 'B' to exit.

# V. Key Discoveries & Lessons Learned

- **PC Mechanics (CRITICAL):** The PC is **stateful**. It remembers the last system accessed (e.g., 'BILL's PC' for Pokémon or 'Gem's PC' for Items). When turning on the PC, it will open directly into the last-used system, bypassing the main selection menu. Any automation tool MUST account for this by having a reset sequence (e.g., pressing 'B' multiple times) to return to a known state before executing commands.
- **Tool Development Failure:** Repeatedly deferred fixing a critically flawed tool (`pc_shuffler_executor`) instead of addressing it immediately. Operated on an untested assumption (PC is stateless) which caused a loop of failures. **Lesson:** Verify core mechanics manually before automating them. Fix broken tools immediately.

# VI. Tile Mechanics & Interaction Rules

- **General Traversal:**
    - `ledge`: Can only be jumped down (from Y-1 to Y+2 in one move). Impassable from all other directions.
    - `steps`: The only way to move between `ground` and `elevated_ground` tiles.
    - `impassable`: Walls, counters, etc. Cannot be entered.
    - `ground`: Walkable tile.
    - `grass`: Tall grass for wild encounters. Walkable.
- **PC Interaction:**
    - **Tile:** The tile for the PC in Pokémon Centers (e.g., Viridian Pokecenter (14,4)) is typed as `grass` in the map data, but it is impassable. Interaction requires standing on the tile directly below it (at (X, Y+1)) and facing up.
    - **Mechanics:** Selecting 'WITHDRAW PKMN' automatically withdraws the first Pokémon in the box list if the party has space. Selecting 'DEPOSIT PKMN' automatically deposits the lead Pokémon in the party. There is no option to choose which Pokémon to withdraw or deposit.

# VII. Tool Development - PC Shuffler Simulation (Blueprint)

- **Objective:** Document the precise button sequence for one full PC shuffle cycle (withdraw, swap, deposit) to serve as a blueprint for the `pc_shuffler_executor` tool.
- **Simulation: One Full Cycle (Validated)**
    1.  **Start:** Player is in the overworld, facing the PC.
    2.  **Action: Withdraw**
        - `A` (Interact with PC) -> Opens "BILL'S PC/GEM's PC/..." menu.
        - `A` (Select BILL's PC) -> Opens "WITHDRAW/DEPOSIT/..." menu.
        - `A` (Select WITHDRAW PKMN) -> Opens box list.
        - `A` (Confirm withdrawal of top Pokémon) -> "Got [Pokemon Name]" message appears.
        - `A` (Acknowledge message) -> Returns to "WITHDRAW/DEPOSIT/..." menu.
        - `Down`, `Down` (Navigate to SEE YA!)
        - `A` (Select SEE YA!) -> Returns to "BILL'S PC/GEM's PC/..." menu.
        - `Down`, `Down`, `Down`, `Down` (Navigate to LOG OFF)
        - `A` (Select LOG OFF) -> Exits PC.
    3.  **Action: Swap** (From lead to last slot)
        - `Start` (Open main menu)
        - `A` (Select PKMN)
        - `A` (Select lead Pokémon)
        - `Down` (Navigate to SWITCH)
        - `A` (Select SWITCH)
        - `Down` * (party_size - 1) times (Navigate to last Pokémon slot)
        - `A` (Confirm swap)
        - `B` (Exit party menu)
        - `B` (Exit main menu)
    4.  **Action: Deposit**
        - `A` (Interact with PC) -> Opens "BILL'S PC/GEM's PC/..." menu.
        - `A` (Select BILL's PC) -> Opens "WITHDRAW/DEPOSIT/..." menu.
        - `Down` (Navigate to DEPOSIT PKMN)
        - `A` (Select DEPOSIT PKMN) -> Opens party list.
        - `A` (Select lead Pokémon to deposit)
        - `A` (Confirm DEPOSIT) -> Returns to "WITHDRAW/DEPOSIT/..." menu.
        - `Down` (Navigate to SEE YA!)
        - `A` (Select SEE YA!) -> Returns to "BILL'S PC/GEM's PC/..." menu.
        - `Down`, `Down`, `Down`, `Down` (Navigate to LOG OFF)
        - `A` (Select LOG OFF) -> Exits PC.
    5.  **End:** Player is in the overworld, facing the PC. One cycle complete.

# VIII. Future Agent & Tool Ideas
- **Team Composition Agent:** Analyze Pokedex and suggest teams for specific challenges (e.g., Gyms) based on type coverage and known opponent rosters.
- **Grinding Optimizer Agent:** Suggest optimal grinding locations based on party levels, target EXP, and wild Pokémon data from known areas.